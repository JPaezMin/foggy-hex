const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DxPy74Uf.js","./C_lOHB8F.js","./entry.BN9IDCY5.css"])))=>i.map(i=>d[i]);
import{h as E,s as j,v as q,x as U,y as W,z as M,A as x,B as N,C as F,D as H,m as Q,i as O,E as V,G as z,H as G,I as Y,J,K as X,L as Z,M as K,N as A}from"#entry";const k={trailing:!0};function ee(e,t=25,n={}){if(n={...k,...n},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let i,r,s=[],a,c;const o=(l,g)=>(a=te(e,l,g),a.finally(()=>{if(a=null,n.trailing&&c&&!r){const _=o(l,c);return c=null,_}}),a),m=function(...l){return n.trailing&&(c=l),a||new Promise(g=>{const _=!r&&n.leading;clearTimeout(r),r=setTimeout(()=>{r=null;const d=n.leading?i:o(this,l);c=null;for(const v of s)v(d);s=[]},t),_?(i=o(this,l),g(i)):s.push(g)})},u=l=>{l&&(clearTimeout(l),r=null)};return m.isPending=()=>!!r,m.cancel=()=>{u(r),s=[],c=null},m.flush=()=>{if(u(r),!c||a)return;const l=c;return c=null,o(this,l)},m}async function te(e,t,n){return await e.apply(t,n)}function de(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;ae(e[0],e[1])&&e.unshift(t);let[n,i,r={}]=e;const s=E(()=>M(n));if(typeof s.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof i!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const a=j();r.server??=!0,r.default??=ne,r.getCachedData??=B,r.lazy??=!1,r.immediate??=!0,r.deep??=q.deep,r.dedupe??="cancel",r._functionName,a._asyncData[s.value];const c={cause:"initial",dedupe:r.dedupe};a._asyncData[s.value]?._init||(c.cachedData=r.getCachedData(s.value,a,{cause:"initial"}),a._asyncData[s.value]=P(a,s.value,i,r,c.cachedData));const o=a._asyncData[s.value];o._deps++;const m=()=>a._asyncData[s.value].execute(c),u=r.server!==!1&&a.payload.serverRendered;{let _=function(f){const h=a._asyncData[f];h?._deps&&(h._deps--,h._deps===0&&h?._off())};const d=z();if(d&&u&&r.immediate&&!d.sp&&(d.sp=[]),d&&!d._nuxtOnBeforeMountCbs){d._nuxtOnBeforeMountCbs=[];const f=d._nuxtOnBeforeMountCbs;G(()=>{f.forEach(h=>{h()}),f.splice(0,f.length)}),Y(()=>f.splice(0,f.length))}const v=d&&(d._nuxtClientOnly||J(X,!1));u&&a.isHydrating&&(o.error.value||o.data.value!==void 0)?o.status.value=o.error.value?"error":"success":d&&(!v&&a.payload.serverRendered&&a.isHydrating||r.lazy)&&r.immediate?d._nuxtOnBeforeMountCbs.push(m):r.immediate&&o.status.value!=="success"&&m();const y=V(),D=U([s,...r.watch||[]],([f],[h])=>{if((f||h)&&f!==h){const S=a._asyncData[h]?.data.value!==void 0,L=a._asyncDataPromises[h]!==void 0;h&&_(h);const T={cause:"initial",dedupe:r.dedupe};if(!a._asyncData[f]?._init){let b;h&&S?b=a._asyncData[h]?.data.value:(b=r.getCachedData(f,a,{cause:"initial"}),T.cachedData=b),a._asyncData[f]=P(a,f,i,r,b)}a._asyncData[f]._deps++,(r.immediate||S||L)&&a._asyncData[f].execute(T)}else o._execute({cause:"watch",dedupe:r.dedupe})},{flush:"sync"});y&&W(()=>{D(),_(s.value)})}const l={data:w(()=>a._asyncData[s.value]?.data),pending:w(()=>a._asyncData[s.value]?.pending),status:w(()=>a._asyncData[s.value]?.status),error:w(()=>a._asyncData[s.value]?.error),refresh:(..._)=>a._asyncData[s.value].execute(..._),execute:(..._)=>a._asyncData[s.value].execute(..._),clear:()=>R(a,s.value)},g=Promise.resolve(a._asyncDataPromises[s.value]).then(()=>l);return Object.assign(g,l),g}function w(e){return E({get(){return e()?.value},set(t){const n=e();n&&(n.value=t)}})}function ae(e,t){return!(typeof e=="string"||typeof e=="object"&&e!==null||typeof e=="function"&&typeof t=="function")}function R(e,t){t in e.payload.data&&(e.payload.data[t]=void 0),t in e.payload._errors&&(e.payload._errors[t]=void 0),e._asyncData[t]&&(e._asyncData[t].data.value=O(e._asyncData[t]._default()),e._asyncData[t].error.value=void 0,e._asyncData[t].status.value="idle"),t in e._asyncDataPromises&&(e._asyncDataPromises[t]&&(e._asyncDataPromises[t].cancelled=!0),e._asyncDataPromises[t]=void 0)}function se(e,t){const n={};for(const i of t)n[i]=e[i];return n}function P(e,t,n,i,r){e.payload._errors[t]??=void 0;const s=i.getCachedData!==B,a=n,c=i.deep?x:N,o=r!==void 0,m=e.hook("app:data:refresh",async l=>{(!l||l.includes(t))&&await u.execute({cause:"refresh:hook"})}),u={data:c(o?r:i.default()),pending:E(()=>u.status.value==="pending"),error:F(e.payload._errors,t),status:N("idle"),execute:(...l)=>{const[g,_=void 0]=l,d=g&&_===void 0&&typeof g=="object"?g:{};if(e._asyncDataPromises[t]){if((d.dedupe??i.dedupe)==="defer")return e._asyncDataPromises[t];e._asyncDataPromises[t].cancelled=!0}{const y="cachedData"in d?d.cachedData:i.getCachedData(t,e,{cause:d.cause??"refresh:manual"});if(y!==void 0)return e.payload.data[t]=u.data.value=y,u.error.value=void 0,u.status.value="success",Promise.resolve(y)}u.status.value="pending";const v=new Promise((y,D)=>{try{y(a(e))}catch(f){D(f)}}).then(async y=>{if(v.cancelled)return e._asyncDataPromises[t];let D=y;i.transform&&(D=await i.transform(y)),i.pick&&(D=se(D,i.pick)),e.payload.data[t]=D,u.data.value=D,u.error.value=void 0,u.status.value="success"}).catch(y=>{if(v.cancelled)return e._asyncDataPromises[t];u.error.value=Q(y),u.data.value=O(i.default()),u.status.value="error"}).finally(()=>{v.cancelled||delete e._asyncDataPromises[t]});return e._asyncDataPromises[t]=v,e._asyncDataPromises[t]},_execute:ee((...l)=>u.execute(...l),0,{leading:!0}),_default:i.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{m(),e._asyncData[t]?._init&&(e._asyncData[t]._init=!1),s||H(()=>{e._asyncData[t]?._init||(R(e,t),u.execute=()=>Promise.resolve())})}};return u}const ne=()=>{},B=(e,t,n)=>{if(t.isHydrating)return t.payload.data[e];if(n.cause!=="refresh:manual"&&n.cause!=="refresh:hook")return t.static.data[e]},I={future:"v3.5.0--H388zsI8WZUafkK00EDLdtEX3KBXZ3PH_agLCFEhzoo",past:"v3.5.0--IT-h1vsB5Kb2QmRyyaoqgclc-77Q4Kklcn6g8lW92xY",shows:"v3.5.0--SXLxQGVYJ_W49eM8HyM_bmqfH9myvOcOsx-4N2JR14I"},re={future:"_content_future",past:"_content_past",shows:"_content_shows",info:"_content_info"},fe={future:{type:"data",fields:{id:"string",title:"string",date:"string",extension:"string",image:"string",meta:"json",slug:"string",stem:"string",venue:"string"}},past:{type:"data",fields:{id:"string",title:"string",date:"string",extension:"string",image:"string",meta:"json",stem:"string",venue:"string"}},shows:{type:"data",fields:{id:"string",title:"string",bands:"json",date:"string",extension:"string",meta:"json",slug:"string",stem:"string",ticketUrl:"string",time:"string",venue:"string"}},info:{type:"data",fields:{}}},$=(e,t)=>{const n=e._conditions;return n.length>0?`(${n.join(` ${t} `)})`:""},C=e=>{const t=[],n={_conditions:t,where(i,r,s){let a;switch(r.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(s)){const c=s.map(o=>p(o)).join(", ");a=`"${String(i)}" ${r.toUpperCase()} (${c})`}else throw new TypeError(`Value for ${r} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(s)&&s.length===2)a=`"${String(i)}" ${r.toUpperCase()} ${p(s[0])} AND ${p(s[1])}`;else throw new Error(`Value for ${r} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":a=`"${String(i)}" ${r.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":a=`"${String(i)}" ${r.toUpperCase()} ${p(s)}`;break;default:a=`"${String(i)}" ${r} ${p(typeof s=="boolean"?Number(s):s)}`}return t.push(`${a}`),n},andWhere(i){const r=i(C());return t.push($(r,"AND")),n},orWhere(i){const r=i(C());return t.push($(r,"OR")),n}};return n},ie=(e,t)=>{const n={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},i={__params:n,andWhere(s){const a=s(C());return n.conditions.push($(a,"AND")),i},orWhere(s){const a=s(C());return n.conditions.push($(a,"OR")),i},path(s){return i.where("path","=",Z(s))},skip(s){return n.offset=s,i},where(s,a,c){return i.andWhere(o=>o.where(String(s),a,c)),i},limit(s){return n.limit=s,i},select(...s){return s.length&&n.selectedFields.push(...s),i},order(s,a){return n.orderBy.push(`"${String(s)}" ${a}`),i},async all(){return t(e,r()).then(s=>s||[])},async first(){return t(e,r({limit:1})).then(s=>s[0]||null)},async count(s="*",a=!1){return t(e,r({count:{field:String(s),distinct:a}})).then(c=>c[0].count)}};function r(s={}){let a="SELECT ";if(s?.count)a+=`COUNT(${s.count.distinct?"DISTINCT ":""}${s.count.field}) as count`;else{const o=Array.from(new Set(n.selectedFields));a+=o.length>0?o.map(m=>`"${String(m)}"`).join(", "):"*"}a+=` FROM ${re[String(e)]}`,n.conditions.length>0&&(a+=` WHERE ${n.conditions.join(" AND ")}`),n.orderBy.length>0?a+=` ORDER BY ${n.orderBy.join(", ")}`:a+=" ORDER BY stem ASC";const c=s?.limit||n.limit;return c>0&&(n.offset>0?a+=` LIMIT ${c} OFFSET ${n.offset}`:a+=` LIMIT ${c}`),a}return i};function p(e){return`'${String(e).replace(/'/g,"''")}'`}async function he(e,t){return await $fetch(`/__nuxt_content/${t}/sql_dump.txt`,{context:{},responseType:"text",headers:{"content-type":"text/plain"},query:{v:I[String(t)],t:void 0}})}async function ce(e,t,n){return await $fetch(`/__nuxt_content/${t}/query`,{context:e?{cloudflare:e.context.cloudflare}:{},headers:{"content-type":"application/json",...e?.node?.req?.headers?.cookie?{cookie:e.node.req.headers.cookie}:{}},query:{v:I[String(t)],t:void 0},method:"POST",body:{sql:n}})}const _e=e=>{const t=K()?.ssrContext?.event;return ie(e,(n,i)=>oe(t,n,i))};async function oe(e,t,n){return window.WebAssembly?ue(t,n):ce(e,String(t),n)}async function ue(e,t){return await A(()=>import("./DxPy74Uf.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(i=>i.loadDatabaseAdapter(e)).then(i=>i.all(t))}export{I as a,fe as c,he as f,_e as q,re as t,de as u};

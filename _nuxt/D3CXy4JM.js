import{g as H,e as S,l as $,h as b,c as r,a as s,i as u,F as _,r as y,o as n,t as i}from"#entry";import{u as E,q as L}from"./Dkb9Uch2.js";const M={class:"container mx-auto px-6 py-16 space-y-16"},q={class:"space-y-8","aria-labelledby":"agenda-upcoming"},z={key:0,class:"grid gap-8 md:grid-cols-2"},B={class:"space-y-2"},P={class:"font-mono text-xs uppercase tracking-[0.6em] text-text/60"},V={class:"font-heading text-2xl leading-snug"},j={class:"font-sans text-sm text-text/80"},Y={class:"space-y-3 font-sans text-sm"},O={class:"flex gap-3"},R={class:"flex-1"},G={class:"flex gap-3"},J={class:"flex-1 space-y-1"},K={key:0,class:"text-text/70"},Q={class:"font-medium"},W={key:0,class:"text-text/70"},X=["href"],Z={class:"flex flex-wrap gap-4 items-center"},ee=["href"],te=["href"],se=["href"],ae={key:1,class:"font-sans text-center text-base text-text/70 border border-dashed border-text/40 py-8"},re={key:0,class:"space-y-6","aria-labelledby":"agenda-archived"},ne={class:"grid gap-4 md:grid-cols-2"},oe={class:"font-mono text-[11px] uppercase tracking-[0.5em] text-text/60"},ie={class:"font-heading text-lg text-text"},ce={class:"font-sans text-sm text-text/70"},ue=H({__name:"agenda",async setup(le){let g,k;S({title:"Nos verémos en... | Foggy Hex",description:"Agenda viva de conciertos y citas afines en los espacios donde Foggy Hex colabora habitualmente.",ogTitle:"Nos verémos en... | Foggy Hex",ogDescription:"Agenda viva de conciertos y citas afines en los espacios donde Foggy Hex colabora habitualmente.",ogImage:"https://www.foggyhexbcn.com/about-og.jpg",ogUrl:"https://www.foggyhexbcn.com/agenda"});const{data:U}=([g,k]=$(()=>E("agenda-events",()=>L("agenda").order("date","ASC").all())),g=await g,k(),g),f=new Date,D=new Date(f.getFullYear(),f.getMonth(),f.getDate()),N=t=>{if(!t)return null;const e=t.trim();if(!e)return null;if(/^\d{4}-\d{2}-\d{2}/.test(e)){const d=(e.split("T")[0]??"").split("-").map(c=>c.trim());if(d.length===3){const[c,m,x]=d,p=Number.parseInt(c,10),l=Number.parseInt(m,10),F=Number.parseInt(x,10);if(Number.isInteger(p)&&Number.isInteger(l)&&Number.isInteger(F)){const T=new Date(p,l-1,F);if(!Number.isNaN(T.getTime()))return T}}}if(/^\d{1,2}\/\d{1,2}\/\d{2,4}$/.test(e)){const[o,d,c]=e.split("/").map(l=>l.trim()),m=Number.parseInt(o,10),x=Number.parseInt(d,10),p=Number.parseInt(c.length===2?`20${c}`:c,10);if(Number.isInteger(p)&&Number.isInteger(x)&&Number.isInteger(m)){const l=new Date(p,x-1,m);if(!Number.isNaN(l.getTime()))return l}}const a=new Date(e);return Number.isNaN(a.getTime())?null:a},w=t=>{if(!t)return"";const e=N(t);if(!e)return t;const a=String(e.getDate()).padStart(2,"0"),o=String(e.getMonth()+1).padStart(2,"0"),d=String(e.getFullYear());return`${a}/${o}/${d}`},v=b(()=>(U.value??[]).map(t=>({...t,parsedDate:N(t.date)}))),I=b(()=>[...v.value].filter(t=>t.parsedDate?t.parsedDate>=D:!0).sort((t,e)=>!t.parsedDate&&!e.parsedDate?t.title.localeCompare(e.title):t.parsedDate?e.parsedDate?t.parsedDate.getTime()-e.parsedDate.getTime():1:-1)),A=b(()=>[...v.value].filter(t=>t.parsedDate&&t.parsedDate<D).sort((t,e)=>!t.parsedDate||!e.parsedDate?0:e.parsedDate.getTime()-t.parsedDate.getTime())),h=t=>t.ticketUrl??t.infoUrl,C=t=>t.ticketUrl?"Entradas":"Más información";return(t,e)=>(n(),r("article",M,[e[4]||(e[4]=s("header",{class:"text-center space-y-6"},[s("div",{class:"inline-flex flex-col gap-2 items-center"},[s("h1",{class:"font-heading text-[46px] leading-tight text-accent title-box px-6 py-3 border border-text inline-block"}," Nos verémos en... ")]),s("p",{class:"font-sans text-lg max-w-3xl mx-auto text-text"}," Una lista en constante actualización con conciertos, escuchas y encuentros que resuenan con la sensibilidad de Foggy Hex. Sumamos paradas afines siempre que aparezcan. ")],-1)),s("section",q,[e[2]||(e[2]=s("div",{class:"flex items-center gap-4"},[s("h2",{id:"agenda-upcoming",class:"font-heading text-3xl border-b-2 border-text pb-2"}," Próximas fechas "),s("span",{class:"font-mono text-xs uppercase tracking-[0.4em] text-text/60"},"En curso")],-1)),I.value.length?(n(),r("div",z,[(n(!0),r(_,null,y(I.value,a=>(n(),r("article",{key:a.slug,class:"border border-text/30 bg-white p-6 flex flex-col gap-4 shadow-sm"},[s("div",B,[s("p",P,i(w(a.date)),1),s("h3",V,i(a.title),1),s("p",j,i(a.venue),1)]),s("dl",Y,[s("div",O,[e[0]||(e[0]=s("dt",{class:"font-semibold w-16"},"Hora",-1)),s("dd",R,i(a.time||"Por confirmar"),1)]),s("div",G,[e[1]||(e[1]=s("dt",{class:"font-semibold w-16"},"Line-up",-1)),s("dd",J,[a.lineup?.length?(n(!0),r(_,{key:1},y(a.lineup,o=>(n(),r("p",{key:o.name,class:"leading-relaxed"},[s("span",Q,i(o.name),1),o.note?(n(),r("span",W," — "+i(o.note),1)):u("",!0),o.url?(n(),r("a",{key:1,href:o.url,target:"_blank",rel:"noopener noreferrer",class:"ml-2 text-accent underline decoration-inherit decoration-1 underline-offset-2"}," escuchar ",8,X)):u("",!0)]))),128)):(n(),r("p",K," Por anunciar "))])])]),s("div",Z,[h(a)?(n(),r("a",{key:0,href:h(a),target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center justify-center px-4 py-2 border border-text text-text font-sans uppercase tracking-[0.4em] text-xs hover:bg-text hover:text-background transition"},i(C(a)),9,ee)):u("",!0),a.infoUrl&&a.ticketUrl?(n(),r("a",{key:1,href:a.infoUrl,target:"_blank",rel:"noopener noreferrer",class:"text-sm underline underline-offset-2 decoration-inherit text-text/70 hover:text-text"}," Más detalles ",8,te)):a.source&&a.source!==h(a)?(n(),r("a",{key:2,href:a.source,target:"_blank",rel:"noopener noreferrer",class:"text-sm underline underline-offset-2 decoration-inherit text-text/70 hover:text-text"}," Fuente ",8,se)):u("",!0)])]))),128))])):(n(),r("p",ae," Aún no hay eventos confirmados para los próximos días. Vuelve pronto: actualizamos tan pronto como cada espacio publica su programación. "))]),A.value.length?(n(),r("section",re,[e[3]||(e[3]=s("div",{class:"flex items-center gap-4"},[s("h2",{id:"agenda-archived",class:"font-heading text-3xl border-b-2 border-text pb-2"}," Registro reciente "),s("span",{class:"font-mono text-xs uppercase tracking-[0.4em] text-text/60"},"Archivo")],-1)),s("ul",ne,[(n(!0),r(_,null,y(A.value,a=>(n(),r("li",{key:`archived-${a.slug}`,class:"border border-text/20 bg-white/70 px-5 py-4"},[s("p",oe,i(w(a.date)),1),s("p",ie,i(a.title),1),s("p",ce,i(a.venue),1)]))),128))])])):u("",!0)]))}});export{ue as default};
